{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/************************************************\r\n * React Diffuse\r\n * @description Global state management solution\r\n * @copyright 2022 RAPMINTS, LLC. All rights reserved.\r\n * @author Kyle Watkins, Paul Scala\r\n * @example https://codesandbox.io/s/wispy-leaf-iyp9k6\r\n ************************************************/\r\nimport React, { useContext, useMemo } from 'react'\r\n\r\n// Create diffuse context\r\nconst DiffuseContext = React.createContext()\r\n\r\n/**\r\n * Wires component to a specified fuse\r\n * @param {object} properties\r\n * @param {string} properties.fuseName Fuse to reference\r\n * @param {Component} properties.component Component to reference\r\n * @returns Wired component\r\n */\r\nconst wire =\r\n  ({ fuseName = [], Child }) =>\r\n  (props) => {\r\n    // Use diffusion context\r\n    const context = useContext(DiffuseContext)\r\n    const fuses = {}\r\n    const memoConstraint = []\r\n    for (let i = 0; i < fuseName.length; i++) {\r\n      fuses[fuseName[i]] = context[fuseName[i]]\r\n      memoConstraint.push(context[fuseName[i]].store)\r\n    }\r\n\r\n    // Set up memoization\r\n    return useMemo(\r\n      () => <Child {...fuses} {...props} />,\r\n      [props, ...memoConstraint]\r\n    )\r\n  }\r\n\r\n/**\r\n * Reduce\r\n * @param {object} reducer Reducer\r\n * @param {object} initialState Initial state\r\n * @param {object} actions Actions\r\n */\r\nconst Reduce = ({\r\n  reducer,\r\n  initialState,\r\n  middleware,\r\n  asyncReducer = null,\r\n  actions,\r\n  asyncActions\r\n}) => {\r\n  // Create initial dispatch\r\n  const [state, dispatch] = React.useReducer(\r\n    (state, action) => action.store,\r\n    initialState\r\n  )\r\n\r\n  // Create enhanced dispatch\r\n  const enhancedDispatch = (newAction) => {\r\n    const res = reducer(newAction.store, newAction)\r\n    if (newAction.store !== res) {\r\n      newAction.store = res\r\n    }\r\n\r\n    dispatch(newAction)\r\n    return res\r\n  }\r\n\r\n  // Create enhanced async dispatch\r\n  const enhancedAsyncDispatch = async (newAction) => {\r\n    return (\r\n      await asyncReducer(newAction, onSuccess, onFail, onProgress, onLoading)\r\n    ).store\r\n  }\r\n\r\n  // Initialize Default Loading Function\r\n  const onLoading = () => {\r\n    return dispatchWithMiddleWare({ type: 'LOADING' })\r\n  }\r\n\r\n  // Initialize Default Success Function\r\n  const onSuccess = (payload) => {\r\n    return dispatchWithMiddleWare({ type: 'SUCCESS', payload })\r\n  }\r\n\r\n  // Initialize Default Fail Function\r\n  const onFail = (payload) => {\r\n    return dispatchWithMiddleWare({ type: 'FAIL', payload })\r\n  }\r\n\r\n  // Initialize Default Progress functions\r\n  const onProgress = (payload) => {\r\n    return dispatchWithMiddleWare({ type: 'PROGRESS', payload })\r\n  }\r\n\r\n  // Dispatch with middleware\r\n  const dispatchWithMiddleWare = async (action) => {\r\n    // Set new action from action passed through dispatch\r\n    let newAction = action\r\n\r\n    // If store is not defined in action set it\r\n    if (newAction.store === undefined) {\r\n      newAction.store = state\r\n    }\r\n\r\n    // If before ware is available run it\r\n    if (middleware && middleware.beforeWare) {\r\n      middleware.beforeWare.forEach((beforeWare) => {\r\n        beforeWare(newAction)\r\n      })\r\n    }\r\n\r\n    // Async actions are available and the current action is async\r\n    if (\r\n      asyncReducer !== null &&\r\n      Object.keys(asyncActions).includes(newAction.type)\r\n    ) {\r\n      // Get new store from dispatch\r\n      const newStore = await enhancedAsyncDispatch(newAction)\r\n\r\n      // Set new action with new store\r\n      newAction = { ...newAction, store: { ...newStore } }\r\n    } else {\r\n      // Get new store from dispatch\r\n      const newStore = { ...enhancedDispatch(newAction) }\r\n\r\n      // Set new action with new store\r\n      newAction = { ...newAction, store: { ...newStore } }\r\n    }\r\n\r\n    // If afterWare is available run it\r\n    if (middleware && middleware.afterWare) {\r\n      middleware.afterWare.forEach((afterWare) => {\r\n        afterWare(newAction)\r\n      })\r\n    }\r\n\r\n    // Return new action\r\n    return newAction\r\n  }\r\n\r\n  // Return state as store and dispatch as dispatch middleware\r\n  const value = {\r\n    store: state,\r\n    dispatch: dispatchWithMiddleWare\r\n  }\r\n\r\n  return value\r\n}\r\n\r\n/**\r\n *\r\n * @param {object[]} values\r\n */\r\nconst MergeReducers = (globalState = []) => {\r\n  // Reduce each state into reducers\r\n  const reducers = globalState.map((state) => {\r\n    return {\r\n      [state.name]: () =>{\r\n        const reducer = Reduce({\r\n          reducer: state.reducer,\r\n          initialState: state.initialState,\r\n          middleware: state.middleware,\r\n          asyncReducer: state.asyncReducer,\r\n          actions: state.actions,\r\n          asyncActions: state.asyncActions\r\n        })\r\n        return reducer\r\n      }\r\n    }\r\n  })\r\n\r\n  // Initialize merged reducers\r\n  const mergedReducers = []\r\n\r\n  // Merge reducers into an array\r\n  reducers.map((r) => {\r\n    Object.keys(r).map((key) => {\r\n      mergedReducers.push(r[key])\r\n    })\r\n  })\r\n\r\n  return reducers\r\n}\r\n\r\n/**\r\n * Creates a reducer\r\n * @param {object} initialState Initial reducer state\r\n * @param {object} actions Key value pair of functions\r\n */\r\nconst createReducer = ({\r\n  initialState = {},\r\n  actions = [],\r\n  middleware = { beforeWare: [], afterWare: [] },\r\n  asyncActions = null\r\n}) => {\r\n  // Reducer\r\n  const reducer = {\r\n    initialState: {\r\n      diffuse: {\r\n        loading: false,\r\n        error: false\r\n      },\r\n      ...initialState\r\n    },\r\n    actionsDict: {\r\n      LOADING: (state) => {\r\n        return {\r\n          diffuse: {\r\n            loading: true,\r\n            error: false\r\n          }\r\n        }\r\n      },\r\n      SUCCESS: (state, payload) => {\r\n        return {\r\n          diffuse: {\r\n            loading: false,\r\n            error: false\r\n          },\r\n          ...payload\r\n        }\r\n      },\r\n      PROGRESS: (state, payload) => {\r\n        return {\r\n          ...payload\r\n        }\r\n      },\r\n      FAIL: (state, payload) => {\r\n        return {\r\n          diffuse: {\r\n            loading: false,\r\n            error: true\r\n          },\r\n          ...payload\r\n        }\r\n      }\r\n    },\r\n    asyncActionsDict: {},\r\n    middleware: middleware,\r\n    // Initialized reducer function\r\n    initialize: (name) => ({\r\n      name: name,\r\n      initialState: { ...reducer.initialState },\r\n      reducer: reducer.reducer,\r\n      middleware: middleware,\r\n      asyncReducer: reducer.asyncReducer,\r\n      actions: reducer.actionsDict,\r\n      asyncActions: reducer.asyncActionsDict\r\n    }),\r\n    reducer: (state, action) => {\r\n      // If action exist in dictionary run the action and return the value\r\n      if (action.type in reducer.actionsDict) {\r\n        const res = reducer.actionsDict[action.type](state, action.payload)\r\n        return {\r\n          ...state,\r\n          ...res\r\n        }\r\n      }\r\n    },\r\n    asyncReducer: async (action, onSuccess, onFail, onProgress, onLoading) => {\r\n      onLoading()\r\n      return {\r\n        ...(await reducer.asyncActionsDict[action.type](\r\n          action.store,\r\n          onSuccess,\r\n          onFail,\r\n          onProgress\r\n        )),\r\n        type: action.type\r\n      }\r\n    },\r\n    addAction: (actionName, action) => {\r\n      // Add regular action\r\n      if (action.type === 'action') {\r\n        reducer.actionsDict[actionName] = action.job\r\n      }\r\n      // Add async action\r\n      else if (action.type === 'async') {\r\n        reducer.asyncActionsDict[actionName] = action.job\r\n      }\r\n    },\r\n    removeAction: (actionName) => {\r\n      // Remove action by name\r\n      if (actionName in reducer.actionsDict) {\r\n        delete reducer.actionsDict[actionName]\r\n      }\r\n    },\r\n    getActions: () => {\r\n      // Init actions array\r\n      const actions = []\r\n\r\n      // For each action push to array\r\n      for (const key in reducer.actionsDict) {\r\n        actions.push(reducer.actionsDict[key])\r\n      }\r\n\r\n      // return actions\r\n      return actions\r\n    }\r\n  }\r\n\r\n  // Add actions to dictionary\r\n  for (const key in actions) {\r\n    reducer.addAction(key, actions[key])\r\n  }\r\n\r\n  return reducer\r\n}\r\n/**\r\n * Diffuse Provider\r\n * @param {object} properties Properties for Diffusion\r\n * @param {Component} properties.children Main App\r\n */\r\nconst Diffuse = ({ reducers, children }) => {\r\n  // Merge reducers from global state\r\n  const mergedReducers = MergeReducers(reducers)\r\n\r\n  // Init Fuse\r\n  const values = {}\r\n\r\n  \r\n\r\n  // Initialize fuses\r\n  for (let i = 0; i < mergedReducers.length; i++) {\r\n    let keys = Object.keys(mergedReducers[i])[0]\r\n    values[keys] = mergedReducers[i][keys]()\r\n  }\r\n\r\n  // Return diffusion provider\r\n  return (\r\n    <DiffuseContext.Provider value={values}>{children}</DiffuseContext.Provider>\r\n  )\r\n}\r\n\r\nexport { wire, createReducer }\r\n\r\nexport default Diffuse\r\n"],"names":["DiffuseContext","React","createContext","wire","fuseName","Child","props","context","useContext","fuses","memoConstraint","i","length","push","store","useMemo","Reduce","reducer","initialState","middleware","asyncReducer","asyncActions","useReducer","state","action","dispatch","enhancedDispatch","newAction","res","enhancedAsyncDispatch","onSuccess","onFail","onProgress","onLoading","dispatchWithMiddleWare","type","payload","afterWare","forEach","undefined","beforeWare","Object","keys","includes","newStore","value","MergeReducers","globalState","reducers","map","name","actions","r","key","createReducer","diffuse","loading","error","actionsDict","LOADING","SUCCESS","PROGRESS","FAIL","asyncActionsDict","initialize","addAction","actionName","job","removeAction","getActions","Diffuse","children","mergedReducers","values"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAUA,IAAMA,cAAc,GAAGC,cAAK,CAACC,aAAN,EAAvB;;IASMC,IAAI,GACR,SADIA,IACJ;EAAA,yBAAGC,QAAH;MAAGA,QAAH,8BAAc,EAAd;MAAkBC,KAAlB,QAAkBA,KAAlB;EAAA,OACA,UAACC,KAAD,EAAW;IAET,IAAMC,OAAO,GAAGC,gBAAU,CAACR,cAAD,CAA1B;IACA,IAAMS,KAAK,GAAG,EAAd;IACA,IAAMC,cAAc,GAAG,EAAvB;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,QAAQ,CAACQ,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;MACxCF,KAAK,CAACL,QAAQ,CAACO,CAAD,CAAT,CAAL,GAAqBJ,OAAO,CAACH,QAAQ,CAACO,CAAD,CAAT,CAA5B;MACAD,cAAc,CAACG,IAAf,CAAoBN,OAAO,CAACH,QAAQ,CAACO,CAAD,CAAT,CAAP,CAAqBG,KAAzC;;;IAIF,OAAOC,aAAO,CACZ;MAAA,oBAAMd,6BAAC,KAAD,eAAWQ,KAAX,EAAsBH,KAAtB,EAAN;KADY,GAEXA,KAFW,SAEDI,cAFC,EAAd;GAZF;AAAA;;AAwBF,IAAMM,MAAM,GAAG,SAATA,MAAS,QAOT;MANJC,OAMI,SANJA,OAMI;MALJC,YAKI,SALJA,YAKI;MAJJC,UAII,SAJJA,UAII;iCAHJC,YAGI;MAHJA,YAGI,mCAHW,IAGX;MADJC,YACI,SADJA;;EAGA,wBAA0BpB,cAAK,CAACqB,UAAN,CACxB,UAACC,KAAD,EAAQC,MAAR;IAAA,OAAmBA,MAAM,CAACV,KAA1B;GADwB,EAExBI,YAFwB,CAA1B;MAAOK,KAAP;MAAcE,QAAd;;EAMA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,SAAD,EAAe;IACtC,IAAMC,GAAG,GAAGX,OAAO,CAACU,SAAS,CAACb,KAAX,EAAkBa,SAAlB,CAAnB;;IACA,IAAIA,SAAS,CAACb,KAAV,KAAoBc,GAAxB,EAA6B;MAC3BD,SAAS,CAACb,KAAV,GAAkBc,GAAlB;;;IAGFH,QAAQ,CAACE,SAAD,CAAR;IACA,OAAOC,GAAP;GAPF;;EAWA,IAAMC,qBAAqB,YAArBA,qBAAqB,CAAUF,SAAV;IAAA,IAAwB;MAAA,uBAEzCP,YAAY,CAACO,SAAD,EAAYG,SAAZ,EAAuBC,MAAvB,EAA+BC,UAA/B,EAA2CC,SAA3C,CAF6B;QACjD,OAAO,cAELnB,KAFF;;KADyB;MAAA;;GAA3B;;EAOA,IAAMmB,SAAS,GAAG,SAAZA,SAAY,GAAM;IACtB,OAAOC,sBAAsB,CAAC;MAAEC,IAAI,EAAE;KAAT,CAA7B;GADF;;EAKA,IAAML,SAAS,GAAG,SAAZA,SAAY,CAACM,OAAD,EAAa;IAC7B,OAAOF,sBAAsB,CAAC;MAAEC,IAAI,EAAE,SAAR;MAAmBC,OAAO,EAAPA;KAApB,CAA7B;GADF;;EAKA,IAAML,MAAM,GAAG,SAATA,MAAS,CAACK,OAAD,EAAa;IAC1B,OAAOF,sBAAsB,CAAC;MAAEC,IAAI,EAAE,MAAR;MAAgBC,OAAO,EAAPA;KAAjB,CAA7B;GADF;;EAKA,IAAMJ,UAAU,GAAG,SAAbA,UAAa,CAACI,OAAD,EAAa;IAC9B,OAAOF,sBAAsB,CAAC;MAAEC,IAAI,EAAE,UAAR;MAAoBC,OAAO,EAAPA;KAArB,CAA7B;GADF;;EAKA,IAAMF,sBAAsB,YAAtBA,sBAAsB,CAAUV,MAAV;IAAA,IAAqB;MAAA;QAmC/C,IAAIL,UAAU,IAAIA,UAAU,CAACkB,SAA7B,EAAwC;UACtClB,UAAU,CAACkB,SAAX,CAAqBC,OAArB,CAA6B,UAACD,SAAD,EAAe;YAC1CA,SAAS,CAACV,SAAD,CAAT;WADF;;;QAMF,OAAOA,SAAP;;;MAxCA,IAAIA,SAAS,GAAGH,MAAhB;;MAGA,IAAIG,SAAS,CAACb,KAAV,KAAoByB,SAAxB,EAAmC;QACjCZ,SAAS,CAACb,KAAV,GAAkBS,KAAlB;;;MAIF,IAAIJ,UAAU,IAAIA,UAAU,CAACqB,UAA7B,EAAyC;QACvCrB,UAAU,CAACqB,UAAX,CAAsBF,OAAtB,CAA8B,UAACE,UAAD,EAAgB;UAC5CA,UAAU,CAACb,SAAD,CAAV;SADF;;;MAX6C;QAAA,IAkB7CP,YAAY,KAAK,IAAjB,IACAqB,MAAM,CAACC,IAAP,CAAYrB,YAAZ,EAA0BsB,QAA1B,CAAmChB,SAAS,CAACQ,IAA7C,CAnB6C;UAAA,uBAsBtBN,qBAAqB,CAACF,SAAD,CAtBC,iBAsBvCiB,QAtBuC;YAyB7CjB,SAAS,gBAAQA,SAAR;cAAmBb,KAAK,eAAO8B,QAAP;cAAjC;;;UAGA,IAAMA,QAAQ,gBAAQlB,gBAAgB,CAACC,SAAD,CAAxB,CAAd;;UAGAA,SAAS,gBAAQA,SAAR;YAAmBb,KAAK,eAAO8B,QAAP;YAAjC;;;;MA/B6C;KAArB;MAAA;;GAA5B;;EA8CA,IAAMC,KAAK,GAAG;IACZ/B,KAAK,EAAES,KADK;IAEZE,QAAQ,EAAES;GAFZ;EAKA,OAAOW,KAAP;AACD,CAzGD;;AA+GA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,WAAD,EAAsB;EAAA,IAArBA,WAAqB;IAArBA,WAAqB,GAAP,EAAO;;;EAE1C,IAAMC,QAAQ,GAAGD,WAAW,CAACE,GAAZ,CAAgB,UAAC1B,KAAD,EAAW;IAAA;;IAC1C,yBACGA,KAAK,CAAC2B,IADT,IACgB,YAAK;MACjB,IAAMjC,OAAO,GAAGD,MAAM,CAAC;QACrBC,OAAO,EAAEM,KAAK,CAACN,OADM;QAErBC,YAAY,EAAEK,KAAK,CAACL,YAFC;QAGrBC,UAAU,EAAEI,KAAK,CAACJ,UAHG;QAIrBC,YAAY,EAAEG,KAAK,CAACH,YAJC;QAKrB+B,OAAO,EAAE5B,KAAK,CAAC4B,OALM;QAMrB9B,YAAY,EAAEE,KAAK,CAACF;OANA,CAAtB;MAQA,OAAOJ,OAAP;KAVJ;GADe,CAAjB;EAoBA+B,QAAQ,CAACC,GAAT,CAAa,UAACG,CAAD,EAAO;IAClBX,MAAM,CAACC,IAAP,CAAYU,CAAZ,EAAeH,GAAf,CAAmB,UAACI,GAAD,EAAS;KAA5B;GADF;EAMA,OAAOL,QAAP;AACD,CA7BD;;IAoCMM,aAAa,GAAG,SAAhBA,aAAgB,QAKhB;iCAJJpC,YAII;MAJJA,YAII,mCAJW,EAIX;4BAHJiC,OAGI;MAHJA,OAGI,8BAHM,EAGN;+BAFJhC,UAEI;MAFJA,UAEI,iCAFS;IAAEqB,UAAU,EAAE,EAAd;IAAkBH,SAAS,EAAE;GAEtC;EAEJ,IAAMpB,QAAO,GAAG;IACdC,YAAY;MACVqC,OAAO,EAAE;QACPC,OAAO,EAAE,KADF;QAEPC,KAAK,EAAE;;OAENvC,YALO,CADE;IAQdwC,WAAW,EAAE;MACXC,OAAO,EAAE,iBAACpC,KAAD,EAAW;QAClB,OAAO;UACLgC,OAAO,EAAE;YACPC,OAAO,EAAE,IADF;YAEPC,KAAK,EAAE;;SAHX;OAFS;MASXG,OAAO,EAAE,iBAACrC,KAAD,EAAQa,OAAR,EAAoB;QAC3B;UACEmB,OAAO,EAAE;YACPC,OAAO,EAAE,KADF;YAEPC,KAAK,EAAE;;WAENrB,OALL;OAVS;MAkBXyB,QAAQ,EAAE,kBAACtC,KAAD,EAAQa,OAAR,EAAoB;QAC5B,oBACKA,OADL;OAnBS;MAuBX0B,IAAI,EAAE,cAACvC,KAAD,EAAQa,OAAR,EAAoB;QACxB;UACEmB,OAAO,EAAE;YACPC,OAAO,EAAE,KADF;YAEPC,KAAK,EAAE;;WAENrB,OALL;;KAhCU;IAyCd2B,gBAAgB,EAAE,EAzCJ;IA0Cd5C,UAAU,EAAEA,UA1CE;IA4Cd6C,UAAU,EAAE,oBAACd,IAAD;MAAA,OAAW;QACrBA,IAAI,EAAEA,IADe;QAErBhC,YAAY,eAAOD,QAAO,CAACC,YAAf,CAFS;QAGrBD,OAAO,EAAEA,QAAO,CAACA,OAHI;QAIrBE,UAAU,EAAEA,UAJS;QAKrBC,YAAY,EAAEH,QAAO,CAACG,YALD;QAMrB+B,OAAO,EAAElC,QAAO,CAACyC,WANI;QAOrBrC,YAAY,EAAEJ,QAAO,CAAC8C;OAPZ;KA5CE;IAqDd9C,OAAO,EAAE,iBAACM,KAAD,EAAQC,MAAR,EAAmB;MAE1B,IAAIA,MAAM,CAACW,IAAP,IAAelB,QAAO,CAACyC,WAA3B,EAAwC;QACtC,IAAM9B,GAAG,GAAGX,QAAO,CAACyC,WAAR,CAAoBlC,MAAM,CAACW,IAA3B,EAAiCZ,KAAjC,EAAwCC,MAAM,CAACY,OAA/C,CAAZ;;QACA,oBACKb,KADL,EAEKK,GAFL;;KAzDU;IA+DdR,YAAY,YAASI,MAAT,EAAiBM,SAAjB,EAA4BC,MAA5B,EAAoCC,UAApC,EAAgDC,SAAhD;MAAA,IAA8D;QACxEA,SAAS;QAD+D,uBAG5DhB,QAAO,CAAC8C,gBAAR,CAAyBvC,MAAM,CAACW,IAAhC,EACRX,MAAM,CAACV,KADC,EAERgB,SAFQ,EAGRC,MAHQ,EAIRC,UAJQ,CAH4D;UAExE;YAOEG,IAAI,EAAEX,MAAM,CAACW;;;OATL;QAAA;;KA/DE;IA2Ed8B,SAAS,EAAE,mBAACC,UAAD,EAAa1C,MAAb,EAAwB;MAEjC,IAAIA,MAAM,CAACW,IAAP,KAAgB,QAApB,EAA8B;QAC5BlB,QAAO,CAACyC,WAAR,CAAoBQ,UAApB,IAAkC1C,MAAM,CAAC2C,GAAzC;OADF,MAIK,IAAI3C,MAAM,CAACW,IAAP,KAAgB,OAApB,EAA6B;QAChClB,QAAO,CAAC8C,gBAAR,CAAyBG,UAAzB,IAAuC1C,MAAM,CAAC2C,GAA9C;;KAlFU;IAqFdC,YAAY,EAAE,sBAACF,UAAD,EAAgB;MAE5B,IAAIA,UAAU,IAAIjD,QAAO,CAACyC,WAA1B,EAAuC;QACrC,OAAOzC,QAAO,CAACyC,WAAR,CAAoBQ,UAApB,CAAP;;KAxFU;IA2FdG,UAAU,EAAE,sBAAM;MAEhB,IAAMlB,OAAO,GAAG,EAAhB;;MAGA,KAAK,IAAME,GAAX,IAAkBpC,QAAO,CAACyC,WAA1B,EAAuC;QACrCP,OAAO,CAACtC,IAAR,CAAaI,QAAO,CAACyC,WAAR,CAAoBL,GAApB,CAAb;;;MAIF,OAAOF,OAAP;;GArGJ;;EA0GA,KAAK,IAAME,GAAX,IAAkBF,OAAlB,EAA2B;IACzBlC,QAAO,CAACgD,SAAR,CAAkBZ,GAAlB,EAAuBF,OAAO,CAACE,GAAD,CAA9B;;;EAGF,OAAOpC,QAAP;AACD;;AAMD,IAAMqD,OAAO,GAAG,SAAVA,OAAU,QAA4B;EAAA,IAAzBtB,QAAyB,SAAzBA,QAAyB;MAAfuB,QAAe,SAAfA,QAAe;EAE1C,IAAMC,cAAc,GAAG1B,aAAa,CAACE,QAAD,CAApC;EAGA,IAAMyB,MAAM,GAAG,EAAf;;EAKA,KAAK,IAAI9D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6D,cAAc,CAAC5D,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;IAC9C,IAAI+B,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAY8B,cAAc,CAAC7D,CAAD,CAA1B,EAA+B,CAA/B,CAAX;IACA8D,MAAM,CAAC/B,IAAD,CAAN,GAAe8B,cAAc,CAAC7D,CAAD,CAAd,CAAkB+B,IAAlB,GAAf;;;EAIF,oBACEzC,6BAAC,cAAD,CAAgB,QAAhB;IAAyB,KAAK,EAAEwE;KAASF,QAAzC,CADF;AAGD,CAnBD;;;;;;"}